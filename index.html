<script>
    function computerPlay() {
        const RNG = Math.floor(Math.random() * 3);

        if (RNG == 0) {
            return "rock";
        } else if (RNG == 1) {
            return "paper";
        } else {
            return "scissors";
        }
    }

    function userPlay() {
        let playerSelection = prompt("Enter your move! (Rock, Paper or Scissors):");
        return playerSelection.toLowerCase();
    }

    function showChoices(computerSelection, playerSelection) {
        console.log("You picked: " + playerSelection);
        console.log("CPU picked: " + computerSelection);
    }

    let playerScore = 0;
    let computerScore = 0;

    function checkScores() {
        let playerWin = false;
        let computerWin = false;

        if (playerScore >= 3) {
            console.log("You win!");
            return playerWin = true;
        } else if (computerScore >= 3) {
            console.log("You lose.");
            return computerWin = true;
        }
    }

    function showScores() {
        console.log("Player: " + playerScore);
        console.log("CPU: " + computerScore);
    }

    function playRound(computerSelection, playerSelection) {
        showChoices(computerSelection, playerSelection);

        if (computerSelection == playerSelection) {
            return "Tie! You both picked " + computerSelection + ".";
        }

        if (playerSelection == "rock") {
            if (computerSelection == "scissors") {
                playerScore++;
                return "You win! Rock beats scissors.";
            } else if (computerSelection == "paper") {
                computerScore++;
                return "You lose! Paper beats rock.";
            }
        } else if (playerSelection == "paper") {
            if (computerSelection == "rock") {
                playerScore++;
                return "You win! Paper beats rock."
            } else if (computerSelection == "scissors") {
                computerScore++;
                return "You lose! Scissors beats paper.";
            }
        } else if (playerSelection == "scissors") {
            if (computerSelection == "paper") {
                playerScore++;
                return "You win! Scissors beats paper.";
            } else if (computerSelection == "rock") {
                computerScore++;
                return "You lose! Rock beats scissors.";
            }
        } else return "You entered an invalid move."
    }

    function game() {
        console.log("First to five wins!");

        while (!checkScores()) {
            const computerSelection = computerPlay();
            const playerSelection = userPlay();
            console.log(playRound(computerSelection, playerSelection));
            showScores();
        }
    }

    game();
</script>